{
  "active": false,
  "connections": {
    "Telegram Trigger2": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-07-29T21:39:10.584Z",
  "id": "F3sFsVZEGBagFzKv",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "MACRO TRACKER BOT",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {
          "download": true,
          "imageSize": "large"
        }
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        1264,
        -128
      ],
      "id": "15de3aef-00c7-471d-85ec-51f84ad57242",
      "name": "Telegram Trigger2",
      "webhookId": "869f2eea-faac-4944-9cf2-9b782f61772e",
      "credentials": {
        "telegramApi": {
          "id": "UQ0TGFdRm981nAK4",
          "name": "Telegram - MACRO TRACKER"
        }
      }
    },
    {
      "parameters": {
        "model": "mistralai/mistral-small-3.1-24b-instruct:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1728,
        144
      ],
      "id": "9fd6121b-7103-4424-b038-cc3a5fc95d35",
      "name": "OpenRouter Chat Model1",
      "credentials": {
        "openRouterApi": {
          "id": "Z0qdSGsCKeFZM9R5",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7b948ccf-6097-4b52-b540-d49b46091952",
              "name": "daily_calories",
              "value": "2000",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1472,
        -128
      ],
      "id": "c9290d07-c384-490c-b97c-b5f680878e7c",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are an expert nutrition tracking assistant. Your goal is to help the user log their food intake and track their calories.\n\nHere is your sequence of operations:\n\n1.  **Analyze Input**: First, analyze the user's message, which may include text and/or an image. Extract all food items and their nutritional information (CALORIES, PROTEIN, FAT, CARBS, FIBER).\n\n2.  **Log Food**: Once you have the nutritional data as a JSON array, you **MUST** call the `log_food_to_google_sheets` tool. Pass the extracted data as the `foodItems` parameter.\n\n3.  **Calculate Remaining Calories**: After successfully logging the food, you **MUST** call the `get_remaining_calories_for_today` tool. Use a daily goal of **2500** calories for the `dailyCalorieGoal` parameter.\n\n4.  **Respond to User**: Finally, formulate a single, friendly response to the user. Inform them that their food has been logged and tell them exactly how many calories they have remaining for the day based on the result from the second tool."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        1712,
        -128
      ],
      "id": "d1243284-728c-4684-8780-b04bd6c1a446",
      "name": "AI Agent"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-07-30T21:43:32.518Z",
  "versionId": "ae9556fe-3062-4905-a738-1f49317129dc"
}