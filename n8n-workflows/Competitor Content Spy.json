{
  "active": false,
  "connections": {
    "Every 6 Hours": {
      "main": [
        [
          {
            "node": "Set Variables (Competitor Handles, Niche, Threshold)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculate Engagement Rate & Viral Flag": {
      "main": [
        [
          {
            "node": "OpenAI: Analyze & Suggest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI: Analyze & Suggest": {
      "main": [
        [
          {
            "node": "Store Intelligence in Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Store Intelligence in Airtable": {
      "main": [
        [
          {
            "node": "Send Slack Competitor Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enhanced Schedule Trigger": {
      "main": [
        [
          {
            "node": "Initialize Workflow State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Duplicate Detection System": {
      "main": [
        [
          {
            "node": "High-Performance Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "High-Performance Filter": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Performance Analytics Engine": {
      "main": [
        [
          {
            "node": "Store Analytics Dashboard",
            "type": "main",
            "index": 0
          },
          {
            "node": "Generate Strategic Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Strategic Report": {
      "main": [
        [
          {
            "node": "Send Slack Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Calculate Engagement Rate & Viral Flag",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Performance Analytics Engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-08-01T16:38:28.802Z",
  "id": "twatfWDTZ8bxSrCX",
  "isArchived": false,
  "meta": null,
  "name": "Competitor Content Spy",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "c3086848-6e3c-42e4-9e09-7dd6212924d6",
      "type": "n8n-nodes-base.scheduleTrigger",
      "name": "Every 6 Hours",
      "position": [
        -608,
        496
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "0fc00c7d-c773-44f0-8007-f5dff7c522b7",
      "type": "n8n-nodes-base.set",
      "name": "Set Variables (Competitor Handles, Niche, Threshold)",
      "position": [
        -272,
        464
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {},
      "id": "83eac69b-0744-43d3-bd48-4b523676b549",
      "type": "n8n-nodes-base.code",
      "name": "Calculate Engagement Rate & Viral Flag",
      "position": [
        784,
        448
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "resource": "chat",
        "chatModel": "gpt-4-turbo",
        "prompt": {
          "messages": [
            {
              "content": "Analyze these viral posts and identify:\n1. Hook patterns that work\n2. Content themes getting engagement  \n3. Optimal posting times\n4. Content gaps (what they're NOT talking about)\n5. Generate 3 better versions of the top post\n\nYour brand voice: {{ $node[\"Set Variables (Competitor Handles, Niche, Threshold)\"].item.json.brandVoice }}\nNiche/industry: {{ $node[\"Set Variables (Competitor Handles, Niche, Threshold)\"].item.json.yourNiche }}\nPosts: {{ JSON.stringify($items(\"Filter: Viral & <7 Days Old\")) }}"
            }
          ]
        },
        "options": {
          "maxTokens": 1000,
          "temperature": 0.7
        },
        "requestOptions": {}
      },
      "id": "d064280e-9251-4650-a933-33ac4cd0d69b",
      "type": "n8n-nodes-base.openAi",
      "name": "OpenAI: Analyze & Suggest",
      "position": [
        1056,
        448
      ],
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "appNf3vADVMKG3Bcg",
          "mode": "list",
          "cachedResultName": "Labubu",
          "cachedResultUrl": "https://airtable.com/appNf3vADVMKG3Bcg"
        },
        "table": {
          "__rl": true,
          "value": "tblLClrx96OO06asa",
          "mode": "list",
          "cachedResultName": "Noahs Tweets",
          "cachedResultUrl": "https://airtable.com/appML5Uk7AaI3KcRS/tblLClrx96OO06asa"
        },
        "options": {}
      },
      "id": "6611bebb-4239-4335-b503-966d1466029a",
      "type": "n8n-nodes-base.airtable",
      "name": "Store Intelligence in Airtable",
      "position": [
        1328,
        448
      ],
      "typeVersion": 2.1
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "",
          "mode": "id"
        },
        "otherOptions": {}
      },
      "id": "a7b27c6e-4504-4454-8c14-1bede49e4b8f",
      "type": "n8n-nodes-base.slack",
      "name": "Send Slack Competitor Report",
      "position": [
        1536,
        448
      ],
      "typeVersion": 2.3,
      "webhookId": "6c9cdb7f-6aae-411b-8dc6-6bb70d955327"
    },
    {
      "parameters": {
        "content": "# Competitor Content Spy Workflow\n\nThis workflow monitors your main competitors' content, computes engagement rates, analyzes theme/patterns with AI, and delivers a daily intelligence summary via Slack.\n\nTweak competitorHandles/brandVoice in the set node. Connect your Apify, Airtable, and Slack details.\n\nYou never have to guess what works in your niche again.",
        "height": 528,
        "width": 560,
        "color": 4
      },
      "id": "ac9aad14-e727-4b00-8361-8591e024f5f4",
      "type": "n8n-nodes-base.stickyNote",
      "name": "Workflow Overview Note",
      "position": [
        -880,
        736
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## OpenAI Prompt\n\nThe OpenAI prompt is dynamically built and includes brand voice, niche, and the **actual viral posts pulled from competitors.**\n\n- The prompt is configured to pull actionable insights and **generate better versions of real content** for you.\n- Adjust model/temperature as needed for more creative or safe results.",
        "height": 656,
        "width": 304
      },
      "id": "993a4dfb-2c69-461c-aa2e-aa5e1ee82743",
      "type": "n8n-nodes-base.stickyNote",
      "name": "OpenAI Prompt Doc",
      "position": [
        960,
        48
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## 🕵️ ENHANCED COMPETITOR INTELLIGENCE SYSTEM\n\n**📊 Key Improvements:**\n✅ **Error Handling & Resilience** - Comprehensive retry logic and fault tolerance\n✅ **Duplicate Prevention** - Intelligent content deduplication system\n✅ **Multi-Platform Support** - Instagram, LinkedIn, Twitter/X, TikTok\n✅ **AI Agent Analysis** - Advanced content strategy recommendations\n✅ **Performance Analytics** - Deep engagement pattern analysis\n✅ **Rate Limiting** - Smart API throttling and batch processing\n\n**🚀 Workflow Flow:**\n1. **Schedule Trigger** → Every 6 hours for fresh content\n2. **Multi-Platform Scraping** → Parallel data collection\n3. **AI-Powered Processing** → Content analysis & insights\n4. **Intelligence Storage** → Structured data persistence\n5. **Strategic Reporting** → Actionable competitor intelligence",
        "height": 660,
        "width": 652
      },
      "name": "System Overview",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -672,
        48
      ],
      "id": "4a4b0ded-9d93-4735-9338-31a3e8661eda",
      "typeVersion": 1
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "name": "Enhanced Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        -720,
        1056
      ],
      "id": "346c051c-f9f8-4ca2-be83-c879e29bf6ee",
      "typeVersion": 1.2
    },
    {
      "parameters": {},
      "name": "Initialize Workflow State",
      "type": "n8n-nodes-base.code",
      "position": [
        -480,
        1056
      ],
      "id": "028851b1-7473-41ca-8c70-0f4436b39fdd",
      "typeVersion": 2
    },
    {
      "parameters": {
        "content": "## 📱 MULTI-PLATFORM SCRAPING SYSTEM\n\n**Parallel Processing Architecture:**\ngo to apify and pick your desired scraper and paste the json prompt into the custom body of the node\n\ndownload the apify community nodes here - https://www.npmjs.com/package/@apify/n8n-nodes-apify\n\n• **Instagram** - Stories, posts, reels engagement\n• **Twitter/X** - Tweets, retweets, quote tweets\n\n**Smart Features:**\n🔄 **Retry Logic** - Automatic failure recovery\n⚡ **Rate Limiting** - Respect API limits\n🎯 **Content Filtering** - High-engagement only\n📊 **Metadata Extraction** - Complete post analytics",
        "height": 712,
        "width": 944,
        "color": 4
      },
      "name": "Platform-Specific Scraping",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "id": "27b38971-3674-47b6-b18d-e58dcbd3b4a0",
      "typeVersion": 1
    },
    {
      "parameters": {},
      "name": "Duplicate Detection System",
      "type": "n8n-nodes-base.code",
      "position": [
        224,
        1056
      ],
      "id": "28c91e3b-e79c-4fb4-8eb3-34f8dcf8c71c",
      "typeVersion": 2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "leftValue": "={{ $json.engagementRate }}",
              "rightValue": 5,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            },
            {
              "leftValue": "={{ $json.wordCount }}",
              "rightValue": 10,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "name": "High-Performance Filter",
      "type": "n8n-nodes-base.filter",
      "position": [
        464,
        1056
      ],
      "id": "51f0ba5b-a354-45ad-897c-28f8babc842d",
      "typeVersion": 2.2
    },
    {
      "parameters": {},
      "name": "Performance Analytics Engine",
      "type": "n8n-nodes-base.code",
      "position": [
        1104,
        1008
      ],
      "id": "2b51525a-6d8e-45ad-ac02-87b29f531bef",
      "typeVersion": 2
    },
    {
      "parameters": {
        "content": "## 💾 INTELLIGENT DATA STORAGE\n\n**Multi-Tier Storage Strategy:**\n🗄️ **Primary**: Airtable - Structured competitor data\n📊 **Analytics**: Performance metrics & trends\n🧠 **AI Insights**: Strategy recommendations\n🔄 **Historical**: Time-series trend analysis\n\n**Data Organization:**\n• Competitor profiles & metadata\n• Content performance history\n• Engagement pattern analysis\n• Strategic recommendations log",
        "height": 416,
        "width": 524,
        "color": 4
      },
      "name": "Enhanced Data Storage",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1280,
        688
      ],
      "id": "e08dc503-f800-43f7-a289-519e338c4f73",
      "typeVersion": 1
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "mode": "list",
          "value": "appCompetitorIntel"
        },
        "table": {
          "mode": "list",
          "value": "tblAnalyticsDashboard"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "analysis_date": "={{ $json.generatedAt }}",
            "total_posts": "={{ $json.totalPosts }}",
            "platforms_monitored": "={{ Object.keys($json.platformBreakdown).join(', ') }}",
            "avg_engagement": "={{ $json.engagementStats.average }}",
            "median_engagement": "={{ $json.engagementStats.median }}",
            "viral_content_count": "={{ $json.contentInsights.viralContent.length }}",
            "optimal_word_count_min": "={{ $json.contentInsights.optimalWordCount.min }}",
            "optimal_word_count_max": "={{ $json.contentInsights.optimalWordCount.max }}",
            "immediate_recommendations": "={{ $json.recommendations.immediate.join('; ') }}",
            "confidence_score": "={{ $json.confidenceScore }}"
          }
        },
        "options": {
          "typecast": true
        }
      },
      "name": "Store Analytics Dashboard",
      "type": "n8n-nodes-base.airtable",
      "position": [
        1600,
        880
      ],
      "id": "8f1c092f-1532-4adf-a932-822064e0d0cd",
      "typeVersion": 2.1
    },
    {
      "parameters": {},
      "name": "Generate Strategic Report",
      "type": "n8n-nodes-base.code",
      "position": [
        1760,
        1168
      ],
      "id": "89ae29cd-609e-481d-9681-75a81d5936ba",
      "typeVersion": 2
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "mode": "list",
          "value": "#competitor-intelligence"
        },
        "text": "{{ $json.formattedReport }}",
        "otherOptions": {
          "includeLinkToWorkflow": true
        }
      },
      "name": "Send Slack Alert",
      "type": "n8n-nodes-base.slack",
      "position": [
        1760,
        1392
      ],
      "id": "ce99fb2e-443b-4370-9e9c-c6b889c475c8",
      "typeVersion": 2.3,
      "webhookId": "f8235009-8000-43bf-a6a7-145f9df00ff8"
    },
    {
      "parameters": {
        "content": "## 🔄 INTELLIGENT CONTENT PROCESSING\n\n**Advanced Data Pipeline:**\n🔍 **Duplicate Detection** - Hash-based content deduplication\n📊 **Engagement Analysis** - Multi-metric scoring system\n🎯 **Content Categorization** - AI-powered taxonomy\n⏰ **Temporal Analysis** - Optimal posting time detection\n\n**Quality Filters:**\n• Minimum engagement thresholds\n• Content freshness requirements\n• Platform-specific metrics\n• Spam/bot detection",
        "height": 528,
        "width": 660,
        "color": 3
      },
      "name": "Content Processing Pipeline",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -304,
        736
      ],
      "id": "17a92082-431b-4cf0-89da-ba7d562ecab4",
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## 🧠 AI-POWERED COMPETITIVE INTELLIGENCE\n\n**Multi-Agent Analysis System:**\n🤖 **Strategy Agent** - Content performance insights\n📊 **Analytics Engine** - Pattern recognition\n🎯 **Opportunity Detection** - Content gap analysis\n🚀 **Trend Prediction** - Future content strategies\n\n**Advanced Capabilities:**\n• Hook effectiveness scoring\n• Emotional tone analysis\n• Viral content pattern detection\n• Competitive positioning insights",
        "height": 528,
        "width": 660,
        "color": 5
      },
      "name": "AI Analysis Hub",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        368,
        736
      ],
      "id": "fa815e1f-ff66-4d85-b02b-cf3621da7b5f",
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## 📈 STRATEGIC INTELLIGENCE REPORTING\n\n**Multi-Channel Delivery:**\n💬 **Slack** - Real-time alerts & daily summaries\n📧 **Email** - Weekly strategic reports\n📊 **Dashboard** - Live performance metrics\n🔔 **Mobile** - Critical competitor moves\n\n**Report Components:**\n• Executive summary with key insights\n• Competitor performance rankings\n• Content opportunity analysis\n• Strategic recommendations\n• Trend predictions & alerts",
        "height": 432,
        "width": 708,
        "color": 6
      },
      "name": "Strategic Reporting System",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1280,
        1120
      ],
      "id": "b776cc37-3f9f-4908-93aa-7a8bdb0127cc",
      "typeVersion": 1
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        560,
        448
      ],
      "id": "c186eafe-deb0-4720-9da6-d3cfcd0d9e5a",
      "name": "Merge"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        704,
        1120
      ],
      "id": "3e26cd9e-ebac-4ac9-b553-bc423faf4778",
      "name": "OpenRouter Chat Model"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        304,
        336
      ],
      "id": "aaa81ada-d3cf-426e-b142-330bcbfcdab3",
      "name": "Get Insta Run"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        64,
        336
      ],
      "id": "c05bb0c9-cb10-47d9-a03d-53a694886fbf",
      "name": "Run Insta actor"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        64,
        528
      ],
      "id": "e736f4f1-8b7f-4e1d-8836-0b2917993b52",
      "name": "Run X Actor"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        304,
        528
      ],
      "id": "33ee8d53-4b7d-4af1-84df-a6cfc0b1fe66",
      "name": "Get X Run"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        16,
        1056
      ],
      "id": "a04ad68b-cec5-452b-8aee-f5f64f247dac",
      "name": "Get actor"
    },
    {
      "parameters": {
        "requestOptions": {}
      },
      "type": "n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -208,
        1056
      ],
      "id": "f0520ea2-650c-405a-96c9-e72445f347e7",
      "name": "Run In-depth Insta Scraper"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Analyze this competitor content data and provide strategic insights: {{ JSON.stringify($json, null, 2) }}",
        "options": {
          "systemMessage": "You are a senior social media strategist and competitive intelligence analyst. Your role is to analyze competitor content performance and provide actionable strategic recommendations.\n\nFocus on:\n- Identifying high-performing content patterns\n- Detecting engagement optimization opportunities\n- Spotting content gaps and whitespace\n- Recommending tactical improvements\n- Providing data-driven strategic insights\n\nAlways provide specific, actionable recommendations backed by the data analysis."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        704,
        960
      ],
      "id": "0a190b55-4f7f-4ec1-a98c-c45c48a68aad",
      "name": "AI Agent"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-08-01T16:44:49.614Z",
  "versionId": "e203c9b4-75a7-4a77-9fa9-f45ff2cea857"
}